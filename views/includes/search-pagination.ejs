<!-- Pagination -->
<% let paginationUrl = '?query=' + encodeURIComponent(query);
if (categoryId) {
    paginationUrl += '&category=' + categoryId;
}
if (type) {
    paginationUrl += '&type=' + type;
} %>
<section class="second-pagination">
<% if (hasPreviousPage) { %>
    <a href="<%= paginationUrl %>&page=1">&laquo;&laquo;</a>
    <a href="<%= paginationUrl %>&page=<%= previousPage %>">&laquo;</a>
<% } %>

<% 
    const delta = 2; // количество страниц до и после текущей
    let startPage = Math.max(1, currentPage - delta);
    let endPage = Math.min(totalPages, currentPage + delta);
%>

<% if (startPage > 1) { %>
    <a href="<%= paginationUrl %>&page=1">1</a>
    <% if (startPage > 2) { %>
    <span>...</span>
    <% } %>
<% } %>

<% for (let i = startPage; i <= endPage; i++) { %>
    <% if (i === currentPage) { %>
    <a href="<%= paginationUrl %>&page=<%= i %>" class="active"><%= i %></a>
    <% } else { %>
    <a href="<%= paginationUrl %>&page=<%= i %>"><%= i %></a>
    <% } %>
<% } %>

<% if (endPage < totalPages) { %>
    <% if (endPage < totalPages - 1) { %>
    <span>...</span>
    <% } %>
    <a href="<%= paginationUrl %>&page=<%= totalPages %>"><%= totalPages %></a>
<% } %>

<% if (hasNextPage) { %>
    <a href="<%= paginationUrl %>&page=<%= nextPage %>">&raquo;</a>
    <a href="<%= paginationUrl %>&page=<%= lastPage %>">&raquo;&raquo;</a>
<% } %>
</section>